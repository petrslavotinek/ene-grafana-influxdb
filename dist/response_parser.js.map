{"version":3,"sources":["../src/response_parser.js"],"names":["addUnique","arr","value","_","ResponseParser","query","results","length","influxResults","series","influxdb11format","toLowerCase","indexOf","res","each","serie","values","isArray","map","text"],"mappings":";;;;;;;;;;;;;AAoCA,WAASA,SAAT,CAAmBC,GAAnB,EAAwBC,KAAxB,EAA+B;AAC7BD,QAAIC,KAAJ,IAAaA,KAAb;AACD;;;AAtCMC,O;;;;;;;;;;;;;;;;;;;;;AAEcC,oB;;;;;;;gCACbC,K,EAAOC,O,EAAS;AACpB,gBAAI,CAACA,OAAD,IAAYA,QAAQA,OAAR,CAAgBC,MAAhB,KAA2B,CAA3C,EAA8C;AAC5C,qBAAO,EAAP;AACD;;AAED,gBAAIC,gBAAgBF,QAAQA,OAAR,CAAgB,CAAhB,CAApB;AACA,gBAAI,CAACE,cAAcC,MAAnB,EAA2B;AACzB,qBAAO,EAAP;AACD;;AAED,gBAAIC,mBAAmBL,MAAMM,WAAN,GAAoBC,OAApB,CAA4B,iBAA5B,KAAkD,CAAzE;;AAEA,gBAAIC,MAAM,EAAV;AACAV,cAAEW,IAAF,CAAON,cAAcC,MAArB,EAA6B,iBAAS;AACpCN,gBAAEW,IAAF,CAAOC,MAAMC,MAAb,EAAqB,iBAAS;AAC5B,oBAAIb,EAAEc,OAAF,CAAUf,KAAV,CAAJ,EAAsB;AACpB,sBAAIQ,gBAAJ,EAAsB;AACpBV,8BAAUa,GAAV,EAAeX,MAAM,CAAN,KAAYA,MAAM,CAAN,CAA3B;AACD,mBAFD,MAEO;AACLF,8BAAUa,GAAV,EAAeX,MAAM,CAAN,CAAf;AACD;AACF,iBAND,MAMO;AACLF,4BAAUa,GAAV,EAAeX,KAAf;AACD;AACF,eAVD;AAWD,aAZD;;AAcA,mBAAOC,EAAEe,GAAF,CAAML,GAAN,EAAW,iBAAS;AACzB,qBAAO,EAAEM,MAAMjB,KAAR,EAAP;AACD,aAFM,CAAP;AAGD;;;;;;yBA/BkBE,c","file":"response_parser.js","sourcesContent":["import _ from 'lodash';\n\nexport default class ResponseParser {\n  parse(query, results) {\n    if (!results || results.results.length === 0) {\n      return [];\n    }\n\n    var influxResults = results.results[0];\n    if (!influxResults.series) {\n      return [];\n    }\n\n    var influxdb11format = query.toLowerCase().indexOf('show tag values') >= 0;\n\n    var res = {};\n    _.each(influxResults.series, serie => {\n      _.each(serie.values, value => {\n        if (_.isArray(value)) {\n          if (influxdb11format) {\n            addUnique(res, value[1] || value[0]);\n          } else {\n            addUnique(res, value[0]);\n          }\n        } else {\n          addUnique(res, value);\n        }\n      });\n    });\n\n    return _.map(res, value => {\n      return { text: value };\n    });\n  }\n}\n\nfunction addUnique(arr, value) {\n  arr[value] = value;\n}\n"]}