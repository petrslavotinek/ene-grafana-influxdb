{"version":3,"sources":["../src/response_parser.js"],"names":["addUnique","arr","value","_","EneResponseParser","query","results","length","influxResults","series","influxdb11format","toLowerCase","indexOf","res","each","serie","values","isArray","map","text"],"mappings":";;;;;;;;;;;;;AAmCA,WAASA,SAAT,CAAmBC,GAAnB,EAAwBC,KAAxB,EAA+B;AAC7BD,QAAIC,KAAJ,IAAaA,KAAb;AACD;;;AArCMC,O;;;;;;;;;;;;;;;;;;;;;AAEcC,uB;;;;;;;gCAEbC,K,EAAOC,O,EAAS;AACpB,gBAAI,CAACA,OAAD,IAAYA,QAAQA,OAAR,CAAgBC,MAAhB,KAA2B,CAA3C,EAA8C;AAAE,qBAAO,EAAP;AAAY;;AAE5D,gBAAIC,gBAAgBF,QAAQA,OAAR,CAAgB,CAAhB,CAApB;AACA,gBAAI,CAACE,cAAcC,MAAnB,EAA2B;AACzB,qBAAO,EAAP;AACD;;AAED,gBAAIC,mBAAmBL,MAAMM,WAAN,GAAoBC,OAApB,CAA4B,iBAA5B,KAAkD,CAAzE;;AAEA,gBAAIC,MAAM,EAAV;AACAV,cAAEW,IAAF,CAAON,cAAcC,MAArB,EAA6B,iBAAS;AACpCN,gBAAEW,IAAF,CAAOC,MAAMC,MAAb,EAAqB,iBAAS;AAC5B,oBAAIb,EAAEc,OAAF,CAAUf,KAAV,CAAJ,EAAsB;AACpB,sBAAIQ,gBAAJ,EAAsB;AACpBV,8BAAUa,GAAV,EAAeX,MAAM,CAAN,KAAYA,MAAM,CAAN,CAA3B;AACD,mBAFD,MAEO;AACLF,8BAAUa,GAAV,EAAeX,MAAM,CAAN,CAAf;AACD;AACF,iBAND,MAMO;AACLF,4BAAUa,GAAV,EAAeX,KAAf;AACD;AACF,eAVD;AAWD,aAZD;;AAcA,mBAAOC,EAAEe,GAAF,CAAML,GAAN,EAAW,iBAAS;AACzB,qBAAO,EAAEM,MAAMjB,KAAR,EAAP;AACD,aAFM,CAAP;AAGD;;;;;;yBA9BkBE,iB","file":"response_parser.js","sourcesContent":["import _ from 'lodash';\r\n\r\nexport default class EneResponseParser {\r\n\r\n  parse(query, results) {\r\n    if (!results || results.results.length === 0) { return []; }\r\n\r\n    var influxResults = results.results[0];\r\n    if (!influxResults.series) {\r\n      return [];\r\n    }\r\n\r\n    var influxdb11format = query.toLowerCase().indexOf('show tag values') >= 0;\r\n\r\n    var res = {};\r\n    _.each(influxResults.series, serie => {\r\n      _.each(serie.values, value => {\r\n        if (_.isArray(value)) {\r\n          if (influxdb11format) {\r\n            addUnique(res, value[1] || value[0]);\r\n          } else {\r\n            addUnique(res, value[0]);\r\n          }\r\n        } else {\r\n          addUnique(res, value);\r\n        }\r\n      });\r\n    });\r\n\r\n    return _.map(res, value => {\r\n      return { text: value};\r\n    });\r\n  }\r\n}\r\n\r\nfunction addUnique(arr, value) {\r\n  arr[value] = value;\r\n}"]}